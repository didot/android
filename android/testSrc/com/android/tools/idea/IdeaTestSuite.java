/*
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.android.tools.idea;

import com.android.testutils.JarTestSuiteRunner;
import com.intellij.openapi.vfs.newvfs.impl.VfsRootAccess;
import org.junit.runner.RunWith;

@RunWith(JarTestSuiteRunner.class)
@JarTestSuiteRunner.ExcludeClasses({
  com.android.tools.idea.IdeaTestSuite.class,  // a suite mustn't contain itself
  com.android.tools.idea.rendering.RenderSecurityManagerTest.class,  // calls System.setSecurityManager
  com.android.tools.idea.templates.TemplateTest.class, // we typically set DISABLE_STUDIO_TEMPLATE_TESTS because it's so slow
  // The following classes had failures when run in Bazel.
  com.android.tools.idea.actions.CreateDeepLinkIntentionActionTest.class,
  com.android.tools.idea.actions.DeepLinkCodeGeneratorActionTest.class,
  com.android.tools.idea.actions.OverrideResourceActionTest.class,
  com.android.tools.idea.apk.viewer.ApkParserTest.class,
  com.android.tools.idea.apk.viewer.diff.ApkDiffParserTest.class,
  com.android.tools.idea.avdmanager.AvdDisplayListTest.class,
  com.android.tools.idea.configurations.ConfigurationManagerTest.class,
  com.android.tools.idea.configurations.ConfigurationStateManagerTest.class,
  com.android.tools.idea.configurations.ConfigurationTest.class,
  com.android.tools.idea.configurations.NestedConfigurationTest.class,
  com.android.tools.idea.configurations.ResourceResolverCacheTest.class,
  com.android.tools.idea.configurations.VaryingConfigurationTest.class,
  com.android.tools.idea.ddms.adb.AdbServiceTest.class,
  com.android.tools.idea.ddms.screenshot.DeviceArtDescriptorTest.class,
  com.android.tools.idea.ddms.screenshot.DeviceArtPainterTest.class,
  com.android.tools.idea.debug.AndroidResolveHelperTest.class,
  com.android.tools.idea.debug.AnnotationsRendererTest.class,
  com.android.tools.idea.editors.AndroidEditorTitleProviderTest.class,
  com.android.tools.idea.editors.AndroidGeneratedSourcesFilterTest.class,
  com.android.tools.idea.editors.AndroidImportFilterTest.class,
  com.android.tools.idea.editors.GradleImplicitPropertyUsageProviderTest.class,
  com.android.tools.idea.editors.hierarchyview.model.ViewNodeTest.class,
  com.android.tools.idea.editors.manifest.ManifestConflictTest.class,
  com.android.tools.idea.editors.manifest.ManifestUtilsTest.class,
  com.android.tools.idea.editors.strings.StringResourceDataTest.class,
  com.android.tools.idea.editors.strings.StringResourceViewPanelTest.class,
  com.android.tools.idea.editors.strings.StringsWriteUtilsTest.class,
  com.android.tools.idea.editors.strings.table.StringsCellEditorTest.class,
  com.android.tools.idea.editors.theme.ColorUtilsTest.class,
  com.android.tools.idea.editors.theme.ConfiguredThemeEditorStyleTest.class,
  com.android.tools.idea.editors.theme.MultipleModulesTest.class,
  com.android.tools.idea.editors.theme.NewStyleDialogTest.class,
  com.android.tools.idea.editors.theme.ResolutionUtilsTest.class,
  com.android.tools.idea.editors.theme.ThemeAttributeResolverTest.class,
  com.android.tools.idea.editors.theme.ThemeEditorComponentTest.class,
  com.android.tools.idea.editors.theme.ThemeEditorUtilsTest.class,
  com.android.tools.idea.editors.theme.ThemeEditorVirtualFileTest.class,
  com.android.tools.idea.editors.theme.ThemeResolverTest.class,
  com.android.tools.idea.editors.theme.datamodels.EditedStyleItemTest.class,
  com.android.tools.idea.editors.theme.qualifiers.QualifierUtilsTest.class,
  com.android.tools.idea.editors.theme.qualifiers.RestrictedConfigurationTest.class,
  com.android.tools.idea.exportSignedPackage.ExportSignedPackageTest.class,
  com.android.tools.idea.fileTypes.AndroidIconProviderTest.class,
  com.android.tools.idea.folding.ResourceFoldingBuilderTest.class,
  com.android.tools.idea.gradle.AndroidGradleModelTest.class,
  com.android.tools.idea.gradle.InternalAndroidModelViewTest.class,
  com.android.tools.idea.gradle.compiler.AndroidGradleBuildProcessParametersProviderTest.class,
  com.android.tools.idea.gradle.compiler.PostProjectBuildTasksExecutorTest.class,
  com.android.tools.idea.gradle.customizer.android.AndroidFacetModuleCustomizerTest.class,
  com.android.tools.idea.gradle.customizer.dependency.TransitiveDependencySetupTest.class,
  com.android.tools.idea.gradle.eclipse.GradleImportTest.class,
  com.android.tools.idea.gradle.invoker.GradleInvokerTest.class,
  com.android.tools.idea.gradle.plugin.AndroidPluginInfoTest.class,
  com.android.tools.idea.gradle.project.AndroidGradleProjectImportingTest.class,
  com.android.tools.idea.gradle.project.GradleProjectImporterTest.class,
  com.android.tools.idea.gradle.project.GradleProjectSyncDataTest.class,
  com.android.tools.idea.gradle.project.NonAndroidGradleProjectImportingTestSuite.class,
  com.android.tools.idea.gradle.project.SdkSyncTest.class,
  com.android.tools.idea.gradle.project.sync.CommandLineArgsTest.class,
  com.android.tools.idea.gradle.project.sync.GradleSyncTest.class,
  com.android.tools.idea.gradle.project.sync.messages.issues.ExternalNativeBuildMessageReporterTest.class,
  com.android.tools.idea.gradle.project.sync.messages.issues.SyncIssuesMessageReporterTest.class,
  com.android.tools.idea.gradle.project.sync.messages.issues.UnhandledIssueMessageReporterTest.class,
  com.android.tools.idea.gradle.project.sync.messages.issues.UnresolvedDependencyMessageReporterTest.class,
  com.android.tools.idea.gradle.project.sync.messages.issues.UnsupportedGradleMessageReporterTest.class,
  com.android.tools.idea.gradle.run.GradleInstantRunAndroidTest.class,
  com.android.tools.idea.gradle.service.notification.errors.UnknownHostErrorHandlerTest.class,
  com.android.tools.idea.gradle.structure.model.android.PsAndroidModuleTest.class,
  com.android.tools.idea.gradle.testing.AndroidJunitPatcherTest.class,
  com.android.tools.idea.gradle.testing.AndroidJunitPatcherWithTestArtifactTest.class,
  com.android.tools.idea.gradle.testing.TestArtifactCustomScopeTest.class,
  com.android.tools.idea.gradle.testing.TestArtifactSearchScopesTest.class,
  com.android.tools.idea.gradle.testing.TestArtifactsFindUsageTest.class,
  com.android.tools.idea.gradle.testing.TestArtifactsRenameTest.class,
  com.android.tools.idea.gradle.testing.TestArtifactsResolveTest.class,
  com.android.tools.idea.gradle.util.FacetsTest.class,
  com.android.tools.idea.gradle.util.GradleWrapperTest.class,
  com.android.tools.idea.gradle.util.ProjectsTest.class,
  com.android.tools.idea.gradle.util.UpdateGradlePluginVersionTest.class,
  com.android.tools.idea.gradle.variant.conflict.ConflictSetTest.class,
  com.android.tools.idea.gradle.variant.view.BuildVariantViewTest.class,
  com.android.tools.idea.javadoc.AndroidJavaDocRendererTest.class,
  com.android.tools.idea.javadoc.AndroidJavaDocWithGradleTest.class,
  com.android.tools.idea.lang.proguard.ProguardCompletionTest.class,
  com.android.tools.idea.model.AndroidModuleInfoTest.class,
  com.android.tools.idea.model.MergedManifestTest.class,
  com.android.tools.idea.navigator.AndroidProjectViewTest.class,
  com.android.tools.idea.npw.AssetStudioAssetGeneratorTest.class,
  com.android.tools.idea.npw.ChooseTemplateStepTest.class,
  com.android.tools.idea.npw.ConfigureAndroidModuleStepDynamicTest.class,
  com.android.tools.idea.npw.ModulesListModelTest.class,
  com.android.tools.idea.npw.NewFormFactorModulePathTest.class,
  com.android.tools.idea.npw.NewModuleWizardStateTest.class,
  com.android.tools.idea.npw.NewModuleWizardTest.class,
  com.android.tools.idea.npw.TemplateWizardModuleBuilderTest.class,
  com.android.tools.idea.npw.importing.ArchiveToGradleModuleModelTest.class,
  com.android.tools.idea.npw.importing.ArchiveToGradleModuleStepTest.class,
  com.android.tools.idea.npw.importing.SourceToGradleModuleModelTest.class,
  com.android.tools.idea.npw.importing.SourceToGradleModuleStepTest.class,
  com.android.tools.idea.npw.project.AndroidGradleModuleUtilsTest.class,
  com.android.tools.idea.rendering.DomPullParserTest.class,
  com.android.tools.idea.rendering.IncludeReferenceTest.class,
  com.android.tools.idea.rendering.LayoutFilePullParserTest.class,
  com.android.tools.idea.rendering.LayoutPsiPullParserTest.class,
  com.android.tools.idea.rendering.LayoutPullParserFactoryTest.class,
  com.android.tools.idea.rendering.MenuPreviewRendererTest.class,
  com.android.tools.idea.rendering.PaddingLayoutPsiPullParserTest.class,
  com.android.tools.idea.rendering.RenderErrorPanelTest.class,
  com.android.tools.idea.res.AarResourceClassGeneratorTest.class,
  com.android.tools.idea.res.AppResourceRepositoryTest.class,
  com.android.tools.idea.res.LocalResourceRepositoryTest.class,
  com.android.tools.idea.res.ModuleResourceRepositoryTest.class,
  com.android.tools.idea.res.ProjectResourceRepositoryTest.class,
  com.android.tools.idea.res.ResourceFolderRepositoryFileCacheTest.class,
  com.android.tools.idea.res.ResourceFolderRepositoryTest.class,
  com.android.tools.idea.res.ResourceHelperTest.class,
  com.android.tools.idea.res.ResourceNameValidatorTest.class,
  com.android.tools.idea.res.ResourceNotificationManagerTest.class,
  com.android.tools.idea.run.AndroidTestConfigurationProducerTest.class,
  com.android.tools.idea.run.GradleApkProviderTest.class,
  com.android.tools.idea.run.GradleApplicationIdProviderTest.class,
  com.android.tools.idea.run.LaunchUtilsTest.class,
  com.android.tools.idea.run.NonGradleApkProviderDependenciesTest.class,
  com.android.tools.idea.run.NonGradleApkProviderTest.class,
  com.android.tools.idea.run.NonGradleApplicationIdProviderTest.class,
  com.android.tools.idea.run.activity.DefaultActivityLocatorTest.class,
  com.android.tools.idea.run.activity.SpecificActivityLocatorTest.class,
  com.android.tools.idea.run.editor.DeepLinkChooserDialogTest.class,
  com.android.tools.idea.sdk.IdeSdksTest.class,
  com.android.tools.idea.sdk.SdkMergerTest.class,
  com.android.tools.idea.sdk.VersionCheckTest.class,
  com.android.tools.idea.stats.DistributionServiceTest.class,
  com.android.tools.idea.templates.CreateGradleWrapperTest.class,
  com.android.tools.idea.templates.GradleFilePsiMergerTest.class,
  com.android.tools.idea.templates.GradleFileSimpleMergerTest.class,
  com.android.tools.idea.templates.ParameterTest.class,
  com.android.tools.idea.templates.RepositoryUrlManagerTest.class,
  com.android.tools.idea.templates.TypedVariableTest.class,
  com.android.tools.idea.templates.UniqueParameterTest.class,
  com.android.tools.idea.ui.ASGalleryTest.class,
  com.android.tools.idea.ui.FileTreeModelTest.class,
  com.android.tools.idea.uibuilder.handlers.AbsoluteLayoutHandlerTest.class,
  com.android.tools.idea.uibuilder.handlers.LinearLayoutHandlerTest.class,
  com.android.tools.idea.uibuilder.handlers.ViewHandlerManagerTest.class,
  com.android.tools.idea.uibuilder.handlers.grid.GridDragHandlerTest.class,
  com.android.tools.idea.uibuilder.handlers.menu.GroupDragHandlerLayoutTest.class,
  com.android.tools.idea.uibuilder.handlers.preference.PreferenceScreenDragHandlerLayoutTest.class,
  com.android.tools.idea.uibuilder.handlers.relative.RelativeLayoutHandlerTest.class,
  com.android.tools.idea.uibuilder.mockup.MockupFileHelperTest.class,
  com.android.tools.idea.uibuilder.mockup.MockupTest.class,
  com.android.tools.idea.uibuilder.model.NlComponentTest.class,
  com.android.tools.idea.uibuilder.model.NlModelTest.class,
  com.android.tools.idea.uibuilder.model.SelectionModelTest.class,
  com.android.tools.idea.uibuilder.palette.IconPreviewFactoryTest.class,
  com.android.tools.idea.uibuilder.palette.NlPaletteModelTest.class,
  com.android.tools.idea.uibuilder.palette.PaletteTest.class,
  com.android.tools.idea.uibuilder.property.NlPropertiesTest.class,
  com.android.tools.idea.uibuilder.property.NlPropertyOrderingTest.class,
  com.android.tools.idea.uibuilder.property.editors.IdAnalyzerTest.class,
  com.android.tools.idea.uibuilder.property.editors.StyleFilterTest.class,
  com.android.tools.idea.uibuilder.property.renderer.NlDefaultRendererTest.class,
  com.android.tools.idea.uibuilder.structure.NlComponentTreeTest.class,
  com.android.tools.idea.uibuilder.surface.InteractionManagerTest.class,
  com.android.tools.idea.welcome.install.AndroidVirtualDeviceTest.class,
  com.android.tools.idea.welcome.wizard.FirstRunWizardTest.class,
  com.android.tools.idea.wizard.template.TemplateWizardStateTest.class,
  com.android.tools.swing.layoutlib.GraphicsLayoutRendererTest.class,
  org.jetbrains.android.AndroidDocumentationProviderTest.class,
  org.jetbrains.android.AndroidDocumentationTest.class,
  org.jetbrains.android.AndroidFindUsagesTest.class,
  org.jetbrains.android.AndroidGotoDeclarationHandlerTest.class,
  org.jetbrains.android.AndroidGotoRelatedTest.class,
  org.jetbrains.android.AndroidJavaHighlightingTest.class,
  org.jetbrains.android.AndroidLintTest.class,
  org.jetbrains.android.AndroidMultiModuleRenameTest.class,
  org.jetbrains.android.AndroidPsiElementFinderTest.class,
  org.jetbrains.android.AndroidRenameTest.class,
  org.jetbrains.android.AndroidResourcesLineMarkerTest.class,
  org.jetbrains.android.AndroidXmlFormatterTest.class,
  org.jetbrains.android.actions.AndroidSafeDeleteTestTest.class,
  org.jetbrains.android.actions.RegisterComponentsTest.class,
  org.jetbrains.android.databinding.AndroidDataBindingTest.class,
  org.jetbrains.android.databinding.GeneratedCodeMatchTest.class,
  org.jetbrains.android.dom.AndroidAnimationDomTest.class,
  org.jetbrains.android.dom.AndroidAnimatorDomTest.class,
  org.jetbrains.android.dom.AndroidColorStateListDomTest.class,
  org.jetbrains.android.dom.AndroidColorsTest.class,
  org.jetbrains.android.dom.AndroidDrawableResourcesDomTest.class,
  org.jetbrains.android.dom.AndroidLayoutDomTest.class,
  org.jetbrains.android.dom.AndroidLibraryProjectTest.class,
  org.jetbrains.android.dom.AndroidLintDomTest.class,
  org.jetbrains.android.dom.AndroidManifestDomTest.class,
  org.jetbrains.android.dom.AndroidMenuTest.class,
  org.jetbrains.android.dom.AndroidRawResourcesDomTest.class,
  org.jetbrains.android.dom.AndroidTransitionDomTest.class,
  org.jetbrains.android.dom.AndroidValueResourcesTest.class,
  org.jetbrains.android.dom.AndroidXmlResourcesDomTest.class,
  org.jetbrains.android.dom.CreateMissingClassFixTest.class,
  org.jetbrains.android.dom.StructureViewTest.class,
  org.jetbrains.android.dom.XmlWrongFileTypeInspectionTest.class,
  org.jetbrains.android.dom.attrs.AttributeDefinitionsImplTest.class,
  org.jetbrains.android.facet.IdeaSourceProviderTest.class,
  org.jetbrains.android.inspections.AndroidInspectionsTest.class,
  org.jetbrains.android.inspections.ResourceTypeInspectionTest.class,
  org.jetbrains.android.inspections.lint.AndroidLintInspectionToolProviderTest.class,
  org.jetbrains.android.inspections.lint.DomPsiConverterTest.class,
  org.jetbrains.android.inspections.lint.IntellijApiDetectorTest.class,
  org.jetbrains.android.inspections.lint.IntellijGradleDetectorTest.class,
  org.jetbrains.android.inspections.lint.LombokPsiConverterTest.class,
  org.jetbrains.android.inspections.lint.LombokPsiParserTest.class,
  org.jetbrains.android.inspections.lint.ParcelableQuickFixTest.class,
  org.jetbrains.android.intentions.AndroidAddStringResourceActionTest.class,
  org.jetbrains.android.intentions.AndroidExtractDimensionActionTest.class,
  org.jetbrains.android.intentions.AndroidIntentionsTest.class,
  org.jetbrains.android.projectView.ResourceMergerTest.class,
  org.jetbrains.android.refactoring.AndroidExtractAsIncludeTest.class,
  org.jetbrains.android.refactoring.AndroidExtractStyleTest.class,
  org.jetbrains.android.refactoring.AndroidFindStyleApplicationsTest.class,
  org.jetbrains.android.refactoring.AndroidInlineLayoutTest.class,
  org.jetbrains.android.refactoring.AndroidInlineStyleTest.class,
  org.jetbrains.android.refactoring.UnusedResourcesGradleTest.class,
  org.jetbrains.android.refactoring.UnusedResourcesTest.class,
  org.jetbrains.android.sdk.AndroidSdkDataTest.class,
  org.jetbrains.android.sdk.AndroidSdkSourcesBrowsingTest.class,
  org.jetbrains.android.sdk.AndroidSdkUtilsTest.class,
  org.jetbrains.android.sdk.AndroidTargetDataTest.class,
  org.jetbrains.android.util.AndroidResourceUtilTest.class,
})
public class IdeaTestSuite {
  // Initialize Idea specific environment
  static {
    System.setProperty("idea.home", System.getProperty("java.io.tmpdir"));
    if (System.getenv("TEST_SRCDIR") != null) {
      VfsRootAccess.allowRootAccess(System.getenv("TEST_SRCDIR"));
    }
  }
}
