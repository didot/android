syntax = "proto2";

option java_package = "com.android.tools.idea";
option java_multiple_files = true;

import "google/protobuf/any.proto";

// A specific version of Android Studio.
message StudioVersion {
  optional int32 major = 1;
  optional int32 minor = 2;
  optional int32 micro = 3;
  optional int32 build = 4;
}

// ServerFlag is a property used to configure a specific feature
// at the client
// percentEnabled: A number from 1-100 indicating what percent of users
//   will have this flag enabled.
// values: The specific value used by this feature. Can be one of the standard
//   primitive types or a custom value.
message ServerFlag {
  optional int32 percent_enabled = 1;
  oneof values {
    int32 int_value = 2;
    float float_value = 3;
    string string_value = 4;
    bool boolean_value = 5;
    google.protobuf.Any proto_value = 6;
  }
}

// ServerFlagData associates a unique name with a server flag
// The name is used to retrieve the flag on the client side
message ServerFlagData {
  optional string name = 1;
  optional ServerFlag server_flag = 2;
}

// ServerFlagList is a collection of ServerFlagData objects.
// configuration_version indicates the CL used for the configuration files
// that generated this list.
message ServerFlagList {
  optional int64 configuration_version = 1;
  repeated ServerFlagData server_flags = 2;
}

// ServerConfiguration contains a ServerFlag object and a range of
// StudioVersion objects that the flag should apply to
message ServerConfiguration {
  optional StudioVersion min_version = 1;
  optional StudioVersion max_version = 2;
  optional ServerFlag server_flag = 3;
}

// ServerConfigurationList is a list of ServerConfiguration objects
message ServerConfigurationList {
  repeated ServerConfiguration server_configurations = 1;
}

// An individual option in a survey
// icon_path: path to icon in Android Studio
// An individual option in a survey
// icon_path: path to icon in Android Studio
// label: text displayed to the user
message Option {
  optional string icon_path = 1;
  optional string label = 2;
}

// A survey presented to the user
// title: title of the survey
// question: question posed to user
// interval_days: number of days between survey being asked
// answer_count: number of answers to be selected
// options: list of survey options
message Survey {
  optional string title = 1;
  optional string question = 2;
  optional int32 interval_days = 3;
  optional int32 answer_count = 4;
  repeated Option options = 5;
}
