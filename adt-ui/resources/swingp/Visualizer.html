<html>
<!--
This HTML file is the swingp visualizer.

The basic architecture is based on a cooperative multithreading model, with the two functional units as follows:
1) An HTTP long-poller that polls Studio for swingp render stats.
    * Each fetch may return one or more swingp frame renders containing multiple threads.
    * The data is encoded via a simple bytes_length + content_bytes[bytes_length] encoding.
    * Each content_bytes[bytes_length] is a complete JSON tree structure, in the pattern of [ThreadStat+].
    * During processing of each ThreadStat, rectangles are generated for rendered components' bounds, and frame bounds are (perhaps) updated.
2) A render loop that takes the rectangles and bounds generated/updated in the poller functional unit, and renders them to the canvas.
    * The canvas is hardcoded to render at 1/4 of Swing's resolution.
    * The 1/4 resolution might not be suitable for high DPI displays -- one can change the frameScale and reload the page.
    * Each rectangle is re-rendered according to a time-based alpha decay.
    * Rectangles' alpha are tied to the parent JSON render tree's lifetime (so all rectangles generated by a single JSON tree shares alpha).
    * Primary (main window) is rendered in green, and secondary (popups and other heavy weight components on top) are rendered in red.
-->

<head>
    <script type="text/javascript" src="Visualizer.js"></script>
    <script type="text/javascript" src="SwingPPoller.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var poller = new SwingPPoller(false);
            var visualizer = new Visualizer(document.getElementById("canvas"),
                document.getElementById("root_filter_element"),
                document.getElementById("components_rendered"));
            poller.addInputHandler(visualizer.processInput);
            setInterval(visualizer.draw, 17);
        }
    </script>
</head>

<body>
<form>
    Filter Root: <input type="text" id="root_filter_element" placeholder="e.g. SomeAwtOrSwingComponentType"><br>
</form>
<p id="components_rendered"></p>
<canvas width="1280" height="1024" id="canvas" />
</body>

</html>